{"ast":null,"code":"import { watch } from 'vue';\nimport { pageHTML } from '../public/FoodMart-1.0.0/htmlSample';\nimport { useIframeStore } from '../../../stores/iframeStore';\n// import pageReader from './AuxJS/PageReader.js'\n\nexport default {\n  data: function data() {\n    return {\n      iframeSrc: '../../public/FoodMart-1.0.0/index.html',\n      // iframeSrc: 'https://www.relateddigital.com/en/',\n      pageHTML: pageHTML,\n      // iframe icerisinde srcdoc her zaman onceliklidir. Dolayisiyla src fallback olarak kullanilmalidir. burada hatayi handle etmenin bir yoru bulunmali\n      // su anda iki versiyon da calisir durumda\n      breakPoints: {\n        desktop: [{\n          width: '1920',\n          height: '1080',\n          fillRatio: '0.45'\n        }, {\n          width: '1366',\n          height: '768',\n          fillRatio: '0.6'\n        }, {\n          width: '1600',\n          height: '900',\n          fillRatio: '0.5'\n        }],\n        tablet: [{\n          width: '810',\n          height: '1080',\n          fillRatio: '0.7'\n        }, {\n          width: '1280',\n          height: '800',\n          fillRatio: '0.65'\n        }, {\n          width: '601',\n          height: '962',\n          fillRatio: '0.7'\n        }],\n        mobile: [{\n          width: '390',\n          height: '844',\n          fillRatio: ''\n        }, {\n          width: '412',\n          height: '915',\n          fillRatio: ''\n        }, {\n          width: '360',\n          height: '780',\n          fillRatio: ''\n        }]\n      }\n    };\n  },\n  methods: {\n    deviceSizeChange: function deviceSizeChange(e) {\n      var selectedSizeOption = e.target.options[e.target.selectedIndex];\n      var selectedWidth = selectedSizeOption.dataset.width;\n      var selectedHeight = selectedSizeOption.dataset.height;\n      var selectedFillRatio = selectedSizeOption.dataset.fillRatio;\n      var iframe = this.$refs.siteFrame; // Access the iframe using Vue ref\n      iframe.style.width = \"\".concat(selectedWidth, \"px\"); // Set the width\n      iframe.style.height = \"\".concat(selectedHeight, \"px\"); // Set the height\n\n      var parent = iframe.parentElement;\n      var parentRect = parent.getBoundingClientRect();\n      var parentWidth = parentRect.width;\n      var parentHeight = parentRect.height;\n\n      // Calculate the scale factor\n      var aspectRatio = parentHeight / parentWidth;\n      console.log(aspectRatio, 16 / 9);\n      iframe.style.transform = \"translate(-50%, -50%) scale(\".concat(selectedFillRatio, \")\");\n    }\n  },\n  setup: function setup() {\n    watch(function () {\n      return pageHTML;\n    }, function (newValue) {\n      if (newValue) {\n        console.log('watch calisti');\n        var iframeStore = useIframeStore();\n        iframeStore.setIframeContent(newValue);\n      }\n    });\n  },\n  mounted: function mounted() {\n    var iframe = this.$refs.siteFrame; // Access the iframe using a Vue ref\n\n    // Add the 'load' event listener to the iframe element\n    iframe.addEventListener('load', function () {\n      // Access the iframe's content\n      if (iframe) {\n        // Example: Use your iframe store to set iframe content\n        var iframeStore = useIframeStore();\n        iframeStore.setIframeContent(iframe);\n      } else {\n        console.warn('Iframe contentWindow is not available');\n      }\n    });\n  }\n};","map":{"version":3,"names":["watch","pageHTML","useIframeStore","data","iframeSrc","breakPoints","desktop","width","height","fillRatio","tablet","mobile","methods","deviceSizeChange","e","selectedSizeOption","target","options","selectedIndex","selectedWidth","dataset","selectedHeight","selectedFillRatio","iframe","$refs","siteFrame","style","concat","parent","parentElement","parentRect","getBoundingClientRect","parentWidth","parentHeight","aspectRatio","console","log","transform","setup","newValue","iframeStore","setIframeContent","mounted","addEventListener","warn"],"sources":["C:\\Users\\USER\\Desktop\\PIO-FRONT\\PIO-FRONT\\theme\\src\\iframeTarget\\components\\TargetPreview.vue"],"sourcesContent":["<template>\r\n  <div class=\"w-1/2 relative h-100 p-5\">\r\n    <label for=\"device\" class=\"inline text-lg text-base font-semibold mb-1 w-100 text-center\"\r\n      >Site Cozunurlugu</label\r\n    >\r\n    <select\r\n      name=\"device\"\r\n      class=\"w-60 p-2 border border-gray-300 rounded-md shadow-sm mb-1 ml-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n      @change=\"deviceSizeChange\"\r\n    >\r\n      <optgroup v-for=\"(optGvalue, optGkey) in breakPoints\" :label=\"optGkey\" :key=\"optGkey\">\r\n        <option\r\n          v-for=\"(optVal, optKey) in optGvalue\"\r\n          :value=\"optVal\"\r\n          :data-width=\"optVal.width\"\r\n          :data-height=\"optVal.height\"\r\n          :data-fill-ratio=\"optVal.fillRatio\"\r\n          :key=\"optKey\"\r\n        >\r\n          {{ optVal.width + 'x' + optVal.height }}\r\n        </option>\r\n      </optgroup>\r\n    </select>\r\n\r\n    <iframe\r\n      id=\"piovare-frame\"\r\n      ref=\"siteFrame\"\r\n      :src=\"iframeSrc\"\r\n      sandbox=\"\r\n        allow-forms allow-modals\r\n        allow-orientation-lock\r\n        allow-pointer-lock\r\n        allow-popups\r\n        allow-scripts\r\n        allow-same-origin\r\n        \"\r\n    ></iframe>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { watch } from 'vue'\r\nimport { pageHTML } from '../public/FoodMart-1.0.0/htmlSample'\r\nimport { useIframeStore } from '../../../stores/iframeStore'\r\n// import pageReader from './AuxJS/PageReader.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      iframeSrc: '../../public/FoodMart-1.0.0/index.html',\r\n      // iframeSrc: 'https://www.relateddigital.com/en/',\r\n      pageHTML,\r\n      // iframe icerisinde srcdoc her zaman onceliklidir. Dolayisiyla src fallback olarak kullanilmalidir. burada hatayi handle etmenin bir yoru bulunmali\r\n      // su anda iki versiyon da calisir durumda\r\n      breakPoints: {\r\n        desktop: [\r\n          { width: '1920', height: '1080', fillRatio: '0.45' },\r\n          { width: '1366', height: '768', fillRatio: '0.6' },\r\n          { width: '1600', height: '900', fillRatio: '0.5' },\r\n        ],\r\n        tablet: [\r\n          { width: '810', height: '1080', fillRatio: '0.7' },\r\n          { width: '1280', height: '800', fillRatio: '0.65' },\r\n          { width: '601', height: '962', fillRatio: '0.7' },\r\n        ],\r\n        mobile: [\r\n          { width: '390', height: '844', fillRatio: '' },\r\n          { width: '412', height: '915', fillRatio: '' },\r\n          { width: '360', height: '780', fillRatio: '' },\r\n        ],\r\n      },\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    deviceSizeChange(e) {\r\n      const selectedSizeOption = e.target.options[e.target.selectedIndex]\r\n      const selectedWidth = selectedSizeOption.dataset.width\r\n      const selectedHeight = selectedSizeOption.dataset.height\r\n      const selectedFillRatio = selectedSizeOption.dataset.fillRatio\r\n\r\n      const iframe = this.$refs.siteFrame // Access the iframe using Vue ref\r\n      iframe.style.width = `${selectedWidth}px` // Set the width\r\n      iframe.style.height = `${selectedHeight}px` // Set the height\r\n\r\n      const parent = iframe.parentElement\r\n      const parentRect = parent.getBoundingClientRect()\r\n      const parentWidth = parentRect.width\r\n      const parentHeight = parentRect.height\r\n\r\n      // Calculate the scale factor\r\n      const aspectRatio = parentHeight / parentWidth\r\n      console.log(aspectRatio, 16 / 9)\r\n\r\n      iframe.style.transform = `translate(-50%, -50%) scale(${selectedFillRatio})`\r\n    },\r\n  },\r\n  setup() {\r\n    watch(\r\n      () => pageHTML,\r\n      (newValue) => {\r\n        if (newValue) {\r\n          console.log('watch calisti')\r\n          const iframeStore = useIframeStore()\r\n          iframeStore.setIframeContent(newValue)\r\n        }\r\n      },\r\n    )\r\n  },\r\n\r\n  mounted() {\r\n    const iframe = this.$refs.siteFrame // Access the iframe using a Vue ref\r\n\r\n    // Add the 'load' event listener to the iframe element\r\n    iframe.addEventListener('load', () => {\r\n      // Access the iframe's content\r\n      if (iframe) {\r\n        // Example: Use your iframe store to set iframe content\r\n        const iframeStore = useIframeStore()\r\n        iframeStore.setIframeContent(iframe)\r\n      } else {\r\n        console.warn('Iframe contentWindow is not available')\r\n      }\r\n    })\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#piovare-frame {\r\n  margin: 10px;\r\n  border: 5px solid lightgray;\r\n  border-radius: 5px;\r\n  width: 1920px;\r\n  height: 1080px;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%) scale(0.45);\r\n  /* scale: 0.35, 0.35; */\r\n  position: absolute;\r\n  right: 0;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}